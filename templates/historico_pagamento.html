{% extends "base.html" %}

{% block title %}HistÃ³rico de Pagamento - {{ cliente.nome }}{% endblock %}

{% block content %}
<div class="card" style="padding: 20px; border-radius: 10px;">
    <h2 style="color: #6a1b9a; margin-bottom: 20px;">ðŸ“š HistÃ³rico de Pagamento</h2>
    <h3 style="margin-bottom: 15px;">Cliente: <strong>{{ cliente.nome }}</strong></h3>
    
    <div style="margin-bottom: 20px; background: #e7f3ff; padding: 15px; border-radius: 8px; border-left: 4px solid #17a2b8;">
        <p><strong>Valor Mensalidade:</strong> R$ {{ "%.2f"|format(cliente.valor_mensalidade) }}</p>
        <p><strong>Dia de Vencimento:</strong> {{ cliente.dia_vencimento }}</p>
    </div>

    {% if pagamentos %}
    <div style="overflow-x: auto; border-radius: 10px; border: 1px solid #ddd;">
        <table class="table table-striped" style="width: 100%; border-collapse: separate; border-spacing: 0;">
            <thead style="background: #6a1b9a; color: #fff;">
                <tr>
                    <th>Data do Pagamento</th>
                    <th>Valor Pago</th>
                    <th>MÃªs de ReferÃªncia</th>
                </tr>
            </thead>
            <tbody>
                {% for pagamento in pagamentos %}
                <tr style="border-bottom: 1px solid #ddd;">
                    <td>{{ pagamento.data_pagamento.strftime('%d/%m/%Y') }}</td>
                    <td>R$ {{ "%.2f"|format(pagamento.valor_pago) }}</td>
                    <td>{{ pagamento.mes_referencia }}/{{ pagamento.ano_referencia }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div class="alert alert-warning" style="text-align: center; margin-top: 15px; background: #fff3cd; color: #856404; border-radius: 8px; padding: 15px; border-left: 4px solid #ffc107;">
        <i class="fas fa-exclamation-triangle"></i> Nenhum pagamento encontrado para este cliente.
    </div>
    {% endif %}
    
    <div style="margin-top: 20px;">
        <a href="{{ url_for('listar_clientes') }}" class="btn" style="background: #6c757d; color: #fff;">
            <i class="fas fa-arrow-left"></i> Voltar para a lista de clientes
        </a>
    </div>
</div>

<style>
    .btn { padding: 8px 12px; border: none; border-radius: 5px; cursor: pointer; text-decoration: none; display: inline-block; }
    .btn:hover { opacity: 0.9; }
    .table { width: 100%; border-collapse: separate; border-spacing: 0; }
    .table th, .table td { padding: 10px; text-align: left; }
    .table th { font-weight: bold; }
</style>

{% endblock %}
